---
title: 'ãƒã‚§ã‚¹ã‚¢ãƒ—ãƒªé–‹ç™º(4) ãƒã‚§ãƒƒã‚¯ã•ã‚Œã«è¡Œãå‹•ãã®ç¦æ­¢'
date: 2020-02-19T21:26:18+09:00
lastmod: 2020-04-24T12:26:18+09:00
categories: [ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°, ãƒã‚§ã‚¹ã‚¢ãƒ—ãƒªé–‹ç™º]
tags: [ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°, Python, ã‚¢ãƒ—ãƒªé–‹ç™º, ãƒã‚§ã‚¹]
draft: false
---

Python ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§å‹•ã‹ã™ãƒ•ã‚§ã‚¢ãƒªãƒ¼ãƒã‚§ã‚¹ã‚¢ãƒ—ãƒªé–‹ç™ºã€é€£è¼‰ç¬¬ï¼”å›ã§ã™ã€‚

{{< pstlk å‰å› chess-app-devel-3 >}}ã¯ã€ãƒãƒ¼ãƒ³ã«ã¤ã„ã¦ãã®å‹•ãã®ä»•çµ„ã¿ã‚’è¦‹ãŸã†ãˆã§ã€

æœ€åˆã®ï¼’æ­©ã®å‹•ãã‚’è¿½åŠ ã—ã¦ã¿ã¾ã—ãŸã€‚

ä»Šå›ã‹ã‚‰ã¯ãƒã‚§ãƒƒã‚¯ã‚„ãƒã‚§ãƒƒã‚¯ãƒ¡ã‚¤ãƒˆã‚’åˆ¤å®šã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ï¼

<!--more-->

ã‚²ãƒ¼ãƒ æ§‹é€ ã®æ ¸å¿ƒã«è¿‘ã„éƒ¨åˆ†ã«è§¦ã‚Œã¦ã„ãã¾ã™ã‚ˆã€‚

<br/>

## ã™ã§ã«`isCheck()`ã¯ã‚ã‚‹ãŒâ€¦

ãƒã‚§ãƒƒã‚¯ã‚’åˆ¤å®šã™ã‚‹
{{% tooltip %}}ãƒ¡ã‚½ãƒƒãƒ‰((ã‚¯ãƒ©ã‚¹å†…ã§å®šç¾©ã•ã‚Œã‚‹é–¢æ•°ã®ã‚ˆã†ãªã‚‚ã®{{% /tooltip %}}
ã¯ã™ã§ã«ç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚

```py:main.py
def isCheck(self):
    #ascertain where the kings are, check all pieces of opposing color against those kings, then if either get hit, check if its checkmate
    king = King
    kingDict = {}
    pieceDict = {BLACK : [], WHITE : []}
    for position,piece in self.gameboard.items():
        if type(piece) == King:
            kingDict[piece.Color] = position
        print(piece)
        pieceDict[piece.Color].append((piece,position))
    #white
    if self.canSeeKing(kingDict[WHITE],pieceDict[BLACK]):
        self.message = "White player is in check"
    if self.canSeeKing(kingDict[BLACK],pieceDict[WHITE]):
        self.message = "Black player is in check"
ã€€
def canSeeKing(self,kingpos,piecelist):
    #checks if any pieces in piece list (which is an array of (piece,position) tuples) can see the king in kingpos
    for piece,position in piecelist:
        if piece.isValid(position,kingpos,piece.Color,self.gameboard):
            return True
```

ã¨ã¯ã„ãˆã€ã“ã‚Œã ã‘ã§ã¯ååˆ†ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

- ãƒã‚§ãƒƒã‚¯ãƒ¡ã‚¤ãƒˆã®åˆ¤å®š
- ã‚¹ãƒ†ã‚¤ãƒ«ãƒ¡ã‚¤ãƒˆã®åˆ¤å®š
- è‡ªã‚‰ãƒã‚§ãƒƒã‚¯ã•ã‚Œã«è¡Œãã‚ˆã†ãªæ‰‹ã®ç¦æ­¢

ã“ã® 3 ã¤ã‚’è¿½åŠ ã—ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚

<br/>

## ã©ã‚Œã‚’å…ˆã«ã‚„ã‚‹ï¼Ÿ

ãƒã‚§ãƒƒã‚¯ãƒ¡ã‚¤ãƒˆãƒ»ã‚¹ãƒ†ã‚¤ãƒ«ãƒ¡ã‚¤ãƒˆã¯ã€å‹•ã‘ãªã„ã¨ã„ã†çŠ¶æ…‹ã‚’å…±æœ‰ã—ã¦ã„ã‚‹ã®ã§ã€

ã¤ãªãŒã‚ŠãŒæ·±ãã€åŒã˜ã‚ˆã†ãªæ›¸ãæ–¹ãŒã§ãã‚‹ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚

ã“ã‚Œã‚‰ã®åˆ¤å®šã«ã¯ã€**èª°ãŒã©ã“ã«å‹•ã‘ã‚‹ã‹ã®æƒ…å ±**ãŒä½¿ã‚ã‚Œã¾ã™ã€‚

è‡ªã‚‰ãƒã‚§ãƒƒã‚¯ã•ã‚Œã«è¡Œãã‚ˆã†ãªæ‰‹ã‚’å…ˆã«ç¦æ­¢ã—ã¦ãŠãã“ã¨ã§ã€é§’ãŒã©ã“ã«ç§»å‹•å¯èƒ½ã‹ã¨ã„ã†æƒ…å ±ãŒæ•´ç†ã•ã‚Œã‚‹ã®ã§ã€

å…ˆã«ã“ã¡ã‚‰ã«å–ã‚Šæ›ã‹ã‚ŠãŸã„ã¨æ€ã„ã¾ã™ã€‚

<br/>

## è‡ªã‚‰ãƒã‚§ãƒƒã‚¯ã•ã‚Œã«è¡Œãã‚ˆã†ãªæ‰‹ã®ç¦æ­¢

é§’ã®ç§»å‹•å…ˆã®å¯èƒ½æ€§ã‚’åˆ¶å¾¡ã—ã¦ã„ã‚‹ã®ã¯ã€`isValid()`ãƒ¡ã‚½ãƒƒãƒ‰ã§ã™ã€‚

```py:pieces.py
def isValid(self,startpos,endpos,Color,gameboard):
    if endpos in self.availableMoves(startpos[0],startpos[1],gameboard, Color = Color):
        return True
    return False
```

ä»Šã‹ã‚‰ã“ã‚Œã‚’ãƒã‚§ãƒƒã‚¯ã¨é–¢é€£ã¥ã‘ãŸã„ã®ã«ã€ã“ã‚Œã¯`Piece`
{{% tooltip %}}ã‚¯ãƒ©ã‚¹((ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å‹ã€è¨­è¨ˆå›³ã®ã‚ˆã†ãªã‚‚ã®{{% /tooltip %}}
å†…ã®ãƒ¡ã‚½ãƒƒãƒ‰ã§ã™ã­ã€‚

`Game`ã‚¯ãƒ©ã‚¹ã«ã‚ã‚‹`isCheck()`ãªã©ã‚’ã“ã¡ã‚‰ã«å–ã‚Šè¾¼ã‚€ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚

ã¨ã„ã†ã“ã¨ã§ã€ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã«`Game`ã‚¯ãƒ©ã‚¹å†…ã«ãŠå¼•ã£è¶Šã—ã—ã¦ã„ãŸã ãã¾ã—ã‚‡ã†ã€‚

ï¼ˆç´›ã‚‰ã‚ã—ã„ã®ã§`isValidMove()`ã¨æ”¹åã—ã¾ã™ã€‚ï¼‰

ãŸã ã—ã€ä½æ‰€ãŒå¤‰ã‚ã‚Šã¾ã™ã®ã§ã€`self`ã®æ„å‘³ãŒå¤‰ã‚ã‚Šã¾ã™ã€‚

`self`ãŒä½•ã‹ã«ã¤ã„ã¦ã¯ã€è§£èª¬ã—ã¦ãã‚Œã¦ã„ã‚‹ã‚µã‚¤ãƒˆãŒå¤šãã‚ã‚‹ã®ã§ã™ãŒã€ã‹ã„ã¤ã¾ã‚“ã§è¨€ã†ã¨ã€

ã‚¯ãƒ©ã‚¹å†…ã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒ`self`ã¨ã„ã£ãŸã¨ãã€ãã‚Œã¯ãã®æ‰€å±ã™ã‚‹ã‚¯ãƒ©ã‚¹ã‚’ã‚‚ã¨ã«ç”Ÿæˆã•ã‚ŒãŸ
{{% tooltip %}}ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ï¼ˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰((ã‚¯ãƒ©ã‚¹ã‚’ã‚‚ã¨ã«ä½œã‚‰ã‚ŒãŸåˆ†èº«ã®ã‚ˆã†ãªã‚‚ã®{{% /tooltip %}}
ã‚’æŒ‡ã—ã¾ã™ã€‚

`Piece`ã‚¯ãƒ©ã‚¹å†…ã«ã„ãŸã¨ãã€`self`ã¯ãƒãƒ¼ãƒ³ã‚„ãƒŠã‚¤ãƒˆãªã©é§’ã®ã“ã¨ã‚’æŒ‡ã™ã‚ã‘ã§ã™ã€‚

ãƒ¡ã‚½ãƒƒãƒ‰å†…ã§`self`ã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã§ã€`Game`ã‚¯ãƒ©ã‚¹å†…ã«ç§»å‹•ã—ãŸå¾Œã¯æ–°ãŸã«é§’ã‚’ç¤ºã™å¼•æ•°ã‚’è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```py:main.py {hl_lines=[3, 5], inline_hl=[0:["4-5"], 1:[3]]}
class Game:
    ...
    def isValidMove(self, piece, startpos, endpos, Color, gameboard):
        '''pieceã®startpos -> endposã®å‹•ããŒå¯èƒ½ã§ã‚ã‚‹ã¨ãTrueã‚’è¿”ã™'''
        if endpos in piece.availableMoves(startpos[0], startpos[1], gameboard, Color = Color):
            return True
        return False
```

ã“ã“ã§å¼•æ•°ã«ã¤ã„ã¦ã€`piece`ã¯å‹•ãé§’ã€`startpos`ã¨`endpos`ã¯é–‹å§‹ä½ç½®ã¨çµ‚äº†ä½ç½®ã€`Color`ã¯é§’è‰²ã€`gameboard`ã¯ç›¤é¢ã®ã“ã¨ã§ã™ã€‚

ã•ã¦ã€ã€Œè‡ªã‚‰ãƒã‚§ãƒƒã‚¯ã•ã‚Œã«è¡Œãã‚ˆã†ãªæ‰‹ã‚’ç¦æ­¢ã™ã‚‹ã€ã¨ã„ã†ã®ã¯ã€

`piece`ãŒã‚­ãƒ³ã‚°ã§ã€ã‚­ãƒ³ã‚°ã®`endpos`ãŒæ•µã®æ”»æ’ƒç¯„å›²ã«ãªã‘ã‚Œã°ã„ã„ã¨ã„ã†ã“ã¨ã§ã—ã‚‡ã†ã‹ï¼Ÿ

ã„ãˆã€å®Ÿã¯å‹•ãé§’ã¯ã‚­ãƒ³ã‚°ã¨ã¯é™ã‚Šã¾ã›ã‚“ã€‚

ã‚­ãƒ³ã‚°ã®ç›¾ã«ãªã£ã¦ã„ãŸé§’ãŒå‹•ãã“ã¨ã§ã‚­ãƒ³ã‚°ã‚’æ”»æ’ƒã«ã•ã‚‰ã™ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚

ã ã‹ã‚‰ã€é§’ã®ç¨®é¡ã‚’é™ã‚‰ãšã€Œ**ãã®é§’ãŒä»®ã«ãã®å‹•ãã‚’ã—ãŸã¨ã™ã‚‹ã¨ã€ãã®å ´åˆãƒã‚§ãƒƒã‚¯çŠ¶æ…‹ã«ãªã‚‹ã‹**ã€ã‚’è¦‹ã‚Œã°ã„ã„ã®ã§ã™ã€‚

### ãƒã‚§ãƒƒã‚¯çŠ¶æ…‹ã«ã‚ã‚‹ã‹ã©ã†ã‹ã‚’åˆ¤å®šã•ã›ã‚‹

ã¨ã“ã‚ã§ã€ã•ãã»ã©ã®`isCheck()`ã¯è¿”ã‚Šå€¤ã‚’å–ã‚Šã¾ã›ã‚“ã€‚

é§’è‰²ã‚’å¼•æ•°ã«ã¨ã‚Šã€ãã®è‰²å´ãŒãƒã‚§ãƒƒã‚¯ã•ã‚Œã¦ã„ã‚‹ã¨ãã«`True`ã‚’è¿”ã™ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚

```py:main.py {hl_lines=[1, 2, "10-12", "14-17", 19], ins=[1, "3-5", "7-9"], del=[0, 2, 6], inline_hl=[1:["4-5"], 3:["0-4"], 7:["0-4"]]}
def isCheck(self):
def isCheck(self, color):
    king = King
    kingDict = {}
    pieceDict = {BLACK : [], WHITE : []}
    for position, piece in self.gameboard.items():
        if type(piece) == King:
            kingDict[piece.Color] = position
        pieceDict[piece.Color].append((piece, position))
    if self.canSeeKing(kingDict[WHITE], pieceDict[BLACK]):
    if color == WHITE:
        if self.canSeeKing(kingDict[WHITE], pieceDict[BLACK]):
            self.message = "White player is in check"
            return True
    if self.canSeeKing(kingDict[BLACK], pieceDict[WHITE]):
    elif color == BLACK:
        if self.canSeeKing(kingDict[BLACK], pieceDict[WHITE]):
            self.message = "Black player is in check"
            return True
```

ã†ãƒ¼ã‚“ã€å·¥å¤«ã™ã‚Œã°ã‚‚ã†ã¡ã‚‡ã£ã¨ç°¡æ½”ã«æ›¸ã‘ã¾ã™ã­ã€‚

ã‚³ãƒ¼ãƒ‰ã®é ­ã«ä¸€æ–‡è¿½åŠ ã—ã¾ã™ã€‚

```py:main.py {hl_lines=[1, "12-14"], inline_hl=[1:[7_"11-13"], 2:[4]]}
opponent = {WHITE: BLACK, BLACK: WHITE}
ã€€
class Game:
    ...
    def isCheck(self, color):
        kingDict = {}
        pieceDict = {BLACK : [], WHITE : []}
        for position, piece in self.gameboard.items():
            if type(piece) == King:
                kingDict[piece.Color] = position
            pieceDict[piece.Color].append((piece, position))
        if self.canSeeKing(kingDict[color], pieceDict[opponent[color]]):
            self.message = f"{color} player is in check"
            return True
```

ã“ã‚Œã§`isCheck()`ã¯ãƒã‚§ãƒƒã‚¯åˆ¤å®šç”¨ã«ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

ã€Œç™½ã¯ãƒã‚§ãƒƒã‚¯ã•ã‚Œã¦ã‚‹ï¼Ÿã€ã¨èã‘ã°ã€Œç™½ã¯ã­ã€ã•ã‚Œã¦ã‚‹ã‚ˆã€ã¨ã‹ã€Œç™½ã¯ã­ã€ã•ã‚Œã¦ã‚‹ã¨ã¯ã„ãˆãªã„ã¿ãŸã„ã ã‚ˆã€ã¨ã‹ç­”ãˆã¦ãã‚Œã¾ã™ã€‚

<br/>

ã¨ã“ã‚ã§ã€å‹•ã„ãŸå¾Œã®ç›¤é¢ã‚’ä»®å®šã—ã¦ã€ãã®ç›¤é¢ä¸Šã§ãƒã‚§ãƒƒã‚¯åˆ¤å®šã‚’ã™ã‚‹ã‚“ã§ã—ãŸã€‚

ã¨ã“ã‚ãŒ`isCheck()`ï¼ˆã¨`canSeeKing()`ï¼‰ã§ä½¿ã‚ã‚Œã¦ã„ã‚‹ç›¤é¢ã¯`self.gameboard`ã§ã™ã€‚

ã“ã‚Œã¯**ç¾åœ¨ã®æœ¬å½“ã®**ç›¤é¢ãªã®ã§ã€ä»®å®šã•ã‚ŒãŸç›¤é¢ã¯ä½¿ãˆã¾ã›ã‚“ã€‚

```py:main.py {hl_lines=[1, 2, 5, 6, 10, 11, 15, 16, 18, 19], ins=[1, 3, 5, 7, 9], del=[0, 2, 4, 6, 8], inline_hl=[1:["6-7"], 2:["5-6"], 5:["17-18"], 7:["8-9"], 8:["13-14"]]}
def isCheck(self, color):
def isCheck(self, color, gameboard):
    kingDict = {}
    pieceDict = {BLACK : [], WHITE : []}
    for position, piece in self.gameboard.items():
    for position, piece in gameboard.items():
        if type(piece) == King:
            kingDict[piece.Color] = position
        pieceDict[piece.Color].append((piece, position))
    if self.canSeeKing(kingDict[color], pieceDict[opponent[color]]):
    if self.canSeeKing(kingDict[color], pieceDict[opponent[color]], gameboard):
        self.message = f"{color} player is in check"
        return True
ã€€
def canSeeKing(self, kingpos, piecelist):
def canSeeKing(self, kingpos, piecelist, gameboard):
    for piece, position in piecelist:
        if piece.isValid(position, kingpos, piece.Color, self.gameboard):
        if piece.isValid(position, kingpos, piece.Color, gameboard):
            return True
```

å¼•æ•°ã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚

ã‚‚ã—`self.gameboard`ã‚’ä½¿ã„ãŸããªã£ãŸã‚‰ã“ã®å¼•æ•°ã«æŒ‡å®šã—ã¦ã—ã¾ãˆã°å¤§ä¸ˆå¤«ã§ã™ã€‚ï¼ˆ`gameboard=self.gameboard`ï¼‰

### ç›¤é¢ã®æ›´æ–°

é§’ã®å‹•ãã‚’æŒ‡å®šã—ãŸå¾Œã€ç›¤é¢ã¯æ›´æ–°ã•ã‚Œã¾ã™ãŒã€ãã‚Œã¯ã©ã®éƒ¨åˆ†ã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ã®ã§ã—ã‚‡ã†ã‹ã€‚

`gameboard`ã‚’é ¼ã‚Šã«æ¢ã™ã¨ã€`main()`å†…ã«ã‚ã‚Šã¾ã™ã€‚

```py:main.py
self.gameboard[endpos] = self.gameboard[startpos]
del self.gameboard[startpos]
```

çµ‚äº†ä½ç½®ã«é–‹å§‹ä½ç½®ã®é§’ã‚’ç§»ã—ã€é–‹å§‹ä½ç½®ã®é§’ã‚’æ¶ˆã™ã¨ã„ã†å‡¦ç†ãŒç›¤é¢ã®æ›´æ–°ã«ãªã‚Šã¾ã™ã€‚

### ç›¤é¢ã‚’ä»®å®šã™ã‚‹

ç›¤é¢ã‚’ä»®å®šã™ã‚‹ã«ã¯ã€æ–°ãŸãªå¤‰æ•°ã‚’ä½œã£ã¦ãã‚Œã«`self.gameboard`ã‚’ã‚³ãƒ”ãƒ¼ã—ã€

æ–°ãŸãªç›¤é¢ã«å¯¾ã—ã¦ç›¤é¢ã‚’æ›´æ–°ã™ã‚Œã°ã„ã„ã§ã—ã‚‡ã†ã€‚

ãã®å¾Œ`isCheck()`ã«ã‹ã‘ã€`True`ã«ãªã‚Œã°ãã®æ‰‹ã¯ç¦æ­¢ã—ã¾ã™ã€‚

```py:main.py {hl_lines=["8-15"]}
from copy import copy
...
class Game:
    ...
    def isValidMove(self, piece, startpos, endpos, Color, gameboard):
        '''pieceã®startpos -> endposã®å‹•ããŒå¯èƒ½ã§ã‚ã‚‹ã¨ãTrueã‚’è¿”ã™'''
        if endpos in piece.availableMoves(startpos[0], startpos[1], gameboard, Color = Color):
            # ç›¤é¢ã®è¤‡è£½
            gameboardTmp = copy(gameboard)
            # è¤‡è£½ã—ãŸç›¤é¢ã®æ›´æ–°
            gameboardTmp[endpos] = gameboardTmp[startpos]
            del gameboardTmp[startpos]
            # ãƒã‚§ãƒƒã‚¯åˆ¤å®š
            if self.isCheck(piece.Color, gameboardTmp):
                return False
            else:
                return True
        else:
            return False
```

å¼•æ•°`Color`ã¨`piece.Color`ã¯åŒã˜æ„å‘³ãªã®ã§çµ±ä¸€ã—ã¦ã‚‚æ§‹ã‚ãªã„ã§ã—ã‚‡ã†ã€‚

```py:main.py {hl_lines=[1, 2, 4, 5], ins=[1, 3], del=[0, 2], inline_hl=[0:["10-11"], 3:["19-20"]]}
def isValidMove(self, piece, startpos, endpos, Color, gameboard):
def isValidMove(self, piece, startpos, endpos, gameboard):
    '''pieceã®startpos -> endposã®å‹•ããŒå¯èƒ½ã§ã‚ã‚‹ã¨ãTrueã‚’è¿”ã™'''
    if endpos in piece.availableMoves(startpos[0], startpos[1], gameboard, Color = Color):
    if endpos in piece.availableMoves(startpos[0], startpos[1], gameboard, Color=piece.Color):
        ...
```

ã¨ã“ã‚ã§ã€`copy()`ã¯çµ„ã¿è¾¼ã¿é–¢æ•°ã§ã¯ãªã„ã®ã§ã€`import`ãŒå¿…è¦ã¨ãªã‚Šã¾ã™ã€‚

<details>
<summary>â“ãªãœç›´æ¥ä»£å…¥ã—ãªã„ï¼Ÿ</summary>
<div><br/>
`copy()`ã‚’ä½¿ç”¨ã—ãªã„ã¨ã€ç›¤é¢ã®æ›´æ–°ã‚’ã—ãŸéš›ã«ã‚‚ã¨ã®ç›¤é¢ã‚‚ä¸€ç·’ã«æ›¸ãæ›ãˆã‚‰ã‚Œã¦ã—ã¾ã„ã¾ã™ã€‚

ã“ã‚Œã¯
{{% tooltip %}}ãƒ‡ã‚£ã‚¯ã‚·ãƒ§ãƒŠãƒª((ã‚­ãƒ¼ã¨å€¤ãŒ 1 å¯¾ 1 ã«å¯¾å¿œã™ã‚‹å½¢ã§ã¾ã¨ã‚ã‚‰ã‚ŒãŸæ§‹é€ {{% /tooltip %}}
ãŒãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ï¼ˆå¤‰æ›´å¯èƒ½ï¼‰ã§ã‚ã‚‹ã“ã¨ã‹ã‚‰èµ·ã“ã‚Šã¾ã™ã€‚

ãƒªã‚¹ãƒˆã§ã‚‚åŒæ§˜ã®ã“ã¨ã¯èµ·ã“ã‚Šã¾ã™ã€‚

```py {linenos=false}
>>> a = [1, 2, 3]
>>> b = a
>>> b.append(4)
>>> a
[1, 2, 3, 4]
```

</div>
</details>

<br/>

ä»Šã¾ã§ã®ç·¨é›†ã§`isCheck()`ã‚„`isValidMove()`ã®å¼•æ•°ãŒå¤‰ã‚ã£ã¦ã„ã‚‹ã®ã§ã€

ãã‚Œã‚‰ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã£ã¦ã„ã‚‹é–¢ä¿‚å„æ‰€ã®å¼•æ•°ã‚‚èª¿æ•´ã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚

ä¾‹ãˆã°ã€`main()`ã¯ã“ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```py:main.py {hl_lines=[19, 23]}
def main(self):
ã€€
    while True:
        self.printBoard()
        print(self.message)
        self.message = ""
        startpos, endpos = self.parseInput()
        try:
            target = self.gameboard[startpos]
        except:
            self.message = "could not find piece; index probably out of range"
            target = None
ã€€
        if target:
            print("found "+str(target))
            if target.Color != self.playersturn:
                self.message = "you aren't allowed to move that piece this turn"
                continue
            if self.isValidMove(target, startpos, endpos, self.gameboard):
                self.message = "that is a valid move"
                self.gameboard[endpos] = self.gameboard[startpos]
                del self.gameboard[startpos]
                self.isCheck(target.Color, self.gameboard)
                ...
```

---

é•·ããªã£ã¦ã—ã¾ã£ãŸã®ã§ã€ä»Šå›ã¯ã“ã®ã¸ã‚“ã§åŒºåˆ‡ã‚ŠãŸã„ã¨æ€ã„ã¾ã™ã€‚

{{< pstlk æ¬¡å› chess-app-devel-5 >}}ã¯ãƒã‚§ãƒƒã‚¯ãƒ¡ã‚¤ãƒˆã®åˆ¤å®šã«ã¤ã„ã¦ã§ã™ã€‚

ã§ã¯ã¾ãŸğŸ‘‹
